<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoLocate - Open-Source Roblox Userscript</title>
    <link rel="icon" href="assets/logo.svg" type="image/svg+xml">
    <style>
* {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap');
      body {
        font-family: 'JetBrains Mono', 'Consolas', 'Monaco', 'Courier New', monospace;
        background: #1b1b1f;
        background-image:
          radial-gradient(circle at 15px 15px, rgba(255, 255, 255, 0.12) 1px, transparent 1px);
        background-size: 30px 30px;
        color: #ffffff;
        line-height: 1.6;
        overflow-x: hidden;
        position: relative;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }
      nav {
        background-color: rgba(34, 34, 38, 0.5);
        padding: 15px 0;
        position: fixed;
        width: 100%;
        top: 0;
        z-index: 1000;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
      }
      .nav-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .logo {
        position: relative;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        text-decoration: none;
        color: #dc2626;
        font-size: 1.8rem;
        font-weight: 700;
        letter-spacing: -0.02em;
      }
      .logo-text-underline {
        color: #ef4444;
        text-decoration: none;
        position: relative;
        transition: color 0.2s ease;
      }
      .logo-text-underline::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 1px;
        left: 0;
        bottom: -2px;
        background-color: #ef4444;
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.2s ease;
      }
      .logo-text-underline:hover {
        color: #f87171;
      }
      .logo-text-underline:hover::after {
        transform: scaleX(1);
      }
      .logo-svg {
        width: 32px;
        height: 32px;
        border-radius: 5px;
      }
      .nav-links {
        display: flex;
        list-style: none;
        gap: 30px;
      }
      .nav-links a {
        color: #ffffff;
        text-decoration: none;
        transition: color 0.3s ease;
        font-weight: 600;
      }
      .nav-links a:hover {
        color: #dc2626;
      }
      @keyframes pulse {
        0%, 100% {
          box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
        }
        50% {
          box-shadow: 0 4px 12px rgba(220, 38, 38, 0.5);
        }
      }
      .hero {
        min-height: 100vh;
        display: flex;
        align-items: center;
        padding-top: 80px;
        position: relative;
      }
      .hero-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 60px;
        align-items: center;
        width: 100%;
      }
      .hero-text h1 {
        font-size: 4rem;
        font-weight: 700;
        margin-bottom: 20px;
        background: linear-gradient(135deg, #ffffff 0%, #dc2626 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        letter-spacing: -0.03em;
      }
      .hero-text .subtitle {
        font-size: 1.8rem;
        color: #ffffff;
        margin-bottom: 30px;
        font-weight: 600;
        letter-spacing: -0.01em;
      }
      .hero-text .description {
        font-size: 1.1rem;
        color: #cccccc;
        margin-bottom: 40px;
        line-height: 1.8;
      }
      .cta-buttons {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        margin-bottom: 40px;
      }
      .btn-primary {
        background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
        color: white;
        padding: 15px 30px;
        border: none;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
        box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
      }
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(220, 38, 38, 0.4);
      }
      .btn-secondary {
        background: transparent;
        color: #cccccc;
        padding: 15px 30px;
        border: 2px solid #444444;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
      }
      .btn-secondary:hover {
        border-color: #dc2626;
        color: #dc2626;
        transform: translateY(-2px);
      }

      /* --- Tooltip Styles --- */
      .tooltip-container {
        position: relative;
        display: inline-block;
      }
      .tooltip-trigger {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        width: 14px;
        height: 14px;
        font-size: 0.8rem;
        font-weight: bold;
        color: #b3b3b3;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        margin-left: 4px;
        cursor: pointer;
        user-select: none;
        transition: background 0.2s, color 0.2s;
      }
      .tooltip-trigger:hover,
      .tooltip-trigger:focus {
        background: rgba(220, 38, 38, 0.3);
        color: #dc2626;
      }
      .tooltip-content {
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%) translateY(-8px);
        background: rgba(34, 34, 38, 0.95);
        color: #cccccc;
        font-size: 0.8rem;
        padding: 6px 10px;
        border-radius: 6px;
        white-space: nowrap;
        pointer-events: none;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.2s, visibility 0.2s;
        z-index: 10;
        margin-bottom: 4px;
        border: 1px solid rgba(220, 38, 38, 0.3);
        font-family: inherit;
      }
      .tooltip-content::after {
        content: '';
        position: absolute;
        top: 100%;
        left: 50%;
        margin-left: -4px;
        border-width: 4px;
        border-style: solid;
        border-color: rgba(220, 38, 38, 0.3) transparent transparent transparent;
      }
      .tooltip-container:hover .tooltip-content,
      .tooltip-container:focus-within .tooltip-content {
        opacity: 1;
        visibility: visible;
      }

      .hero-stats {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
        margin-top: 12px;
        max-width: 360px;
      }
      .stat-item {
        background: rgba(220, 38, 38, 0.1);
        border: 2px solid rgba(220, 38, 38, 0.3);
        border-radius: 12px;
        padding: 14px;
        text-align: center;
        transition: all 0.3s ease;
      }
      .stat-item:hover {
        background: rgba(220, 38, 38, 0.15);
        border-color: rgba(220, 38, 38, 0.5);
        transform: translateY(-2px);
      }
      .stat-number {
        font-size: 2rem;
        font-weight: 700;
        color: #dc2626;
        margin-bottom: 4px;
        line-height: 1;
      }
      .stat-label {
        color: #b3b3b3;
        font-size: 0.85rem;
        font-weight: 500;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .live-indicator {
        display: inline-block;
        width: 8px;
        height: 8px;
        background: #22c55e;
        border-radius: 50%;
        margin-right: 6px;
        animation: blink 1.5s ease-in-out infinite;
        transform: translateY(-8px);
      }
      @keyframes blink {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.3;
        }
      }
      .hero-logo {
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
      }
      .logo-container {
        width: 300px;
        height: 300px;
        background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        box-shadow: 0 20px 40px rgba(220, 38, 38, 0.3);
        animation: float 6s ease-in-out infinite;
        padding: 40px;
      }
      .logo-container::before {
        content: '';
        position: absolute;
        inset: -2px;
        background: linear-gradient(135deg, #dc2626, #b91c1c, #991b1b);
        border-radius: 22px;
        z-index: -1;
        opacity: 0.7;
      }
      .logo-text {
        font-size: 2.5rem;
        font-weight: 900;
        color: white;
        text-align: center;
        letter-spacing: -1px;
      }
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }
      @media (max-width: 768px) {
        .hero-content {
          grid-template-columns: 1fr;
          gap: 40px;
          text-align: center;
        }
        .hero-text h1 {
          font-size: 3rem;
        }
        .nav-links {
          display: none;
        }
        .logo-container {
          width: 250px;
          height: 250px;
        }
        .logo-text {
          font-size: 2rem;
        }
        .hero-stats {
          grid-template-columns: 1fr;
          gap: 15px;
        }
        .stat-label {
          justify-content: center;
        }
      }
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #1b1b1f;
      }
      ::-webkit-scrollbar-thumb {
        background: #dc2626;
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #b91c1c;
      }
      .footer {
        text-align: center;
        padding: 40px 0;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        margin-top: 60px;
      }
      .footer p {
        color: #888888;
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <nav>
      <div class="container">
        <div class="nav-container">
          <a href="index.html" class="logo logo-text-underline">
            <img src="assets/logo.svg" alt="RoLocate Logo" class="logo-svg" />
            <span>RoLocate</span>
          </a>
          <ul class="nav-links">
            <li>
              <a href="docs/">Documentation</a>
            </li>
            <li>
              <a href="install/">Install</a>
            </li>
            <li>
              <a href="changelog/">Changelog</a>
            </li>
            <li>
              <a href="https://greasyfork.org/en/scripts/523727-rolocate/feedback" target="_blank" rel="noopener noreferrer" style="line-height:1;"> Feedback/Support <svg viewBox="2 2 20 20" style="display:inline-block;vertical-align:middle;margin-left:-5px;width:12px;height:12px;stroke:gray;stroke-width:1.8;fill:none;">
                  <path d="M5 19L19 5M10 5h9v9" />
                </svg>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <section class="hero">
      <div class="container">
        <div class="hero-content">
          <div class="hero-text">
            <h1>RoLocate</h1>
            <p class="subtitle">Open-Source Roblox Userscript</p>
            <p class="description"> Install, Documentation, and Frequent Questions </p>
            <div class="cta-buttons">
              <a href="install/" class="btn-primary" target="_blank">Install Now</a>
              <a href="https://greasyfork.org/en/scripts/523727-rolocate/code" class="btn-secondary" target="_blank">Source Code</a>
            </div>
            <div class="hero-stats">
              <div class="stat-item">
                <div class="stat-number" id="total-installs">NA</div>
                <div class="stat-label">Total Installs</div>
              </div>
              <div class="stat-item">
                <div class="stat-number">20+</div>
                <div class="stat-label">Features</div>
              </div>
              <div class="stat-item">
                <div class="stat-number" id="daily-users">
                  <span class="live-indicator"></span><span>NA</span>
                </div>
                <div class="stat-label">
                  Daily Users •&nbsp;
                  <div class="tooltip-container">
                    <span class="tooltip-trigger">?</span>
                    <span class="tooltip-content" id="daily-users-tooltip">Last updated:</span>
                  </div>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-number" id="latest-version">
                  <span>NA</span>
                </div>
                <div class="stat-label">Latest Version</div>
              </div>
            </div>
          </div>
          <div class="hero-logo">
            <div class="logo-container">
              <img src="assets/logo.svg" alt="Logo" />
            </div>
          </div>
        </div>
      </div>
    </section>
    <footer class="footer">
      <div class="container">
        <p>&copy; 2025 RoLocate. Open-source project available under a Custom License – Personal Use Only.</p>
      </div>
    </footer>
    <script>
      // greasyfork api not overwhelmed
      const CACHE_KEY_SCRIPT = 'rolocate_script_info';
      const CACHE_KEY_STATS = 'rolocate_daily_stats';

      function getStartOfCurrentHour(date = new Date()) {
        const d = new Date(date);
        d.setMinutes(0, 0, 0);
        return d;
      }

      function getStartOfNextHour(date = new Date()) {
        const d = getStartOfCurrentHour(date);
        d.setHours(d.getHours() + 1);
        return d;
      }

      function isCacheValid(expiresAt) {
        return Date.now() < expiresAt;
      }

      function formatHourLabel(date) {
        return new Date(date).toLocaleDateString([], {
          month: 'short',
          day: 'numeric',
          hour: 'numeric',
          minute: '2-digit',
          hour12: true
        });
      }

      function safeSetText(el, text) {
        if (el) el.textContent = String(text ?? '');
      }

      async function fetchScriptInfo() {
        const cached = JSON.parse(localStorage.getItem(CACHE_KEY_SCRIPT) || '{}');
        if (cached.data && isCacheValid(cached.expiresAt)) {
          applyScriptInfo(cached.data);
          return;
        }

        try {
          const res = await fetch('https://api.greasyfork.org/en/scripts/523727.json');
          if (!res.ok) throw new Error(`HTTP ${res.status}`);
          const data = await res.json();

          const expiresAt = getStartOfNextHour().getTime();
          localStorage.setItem(CACHE_KEY_SCRIPT, JSON.stringify({
            data,
            expiresAt
          }));

          applyScriptInfo(data);
        } catch (error) {
          console.warn('Failed to fetch script info (using fallback)', error);
          applyScriptInfo({ version: '44.4', total_installs: 8000 });
        }
      }

      function applyScriptInfo(data) {
        safeSetText(document.getElementById('latest-version'), `v${data.version || '?.?'}`);
        const total = data.total_installs || 0;
        const display = total >= 1000 ? `${Math.floor(total / 1000)}K+` : String(total);
        safeSetText(document.getElementById('total-installs'), display);
      }

      async function fetchDailyStats() {
        const cached = JSON.parse(localStorage.getItem(CACHE_KEY_STATS) || '{}');
        if (cached.data && isCacheValid(cached.expiresAt)) {
          applyDailyStats(cached.data, cached.expiresAt);
          return;
        }

        try {
          const res = await fetch('https://api.greasyfork.org/en/scripts/523727-rolocate/stats.json');
          if (!res.ok) throw new Error(`HTTP ${res.status}`);
          const stats = await res.json();

          const expiresAt = getStartOfNextHour().getTime();
          localStorage.setItem(CACHE_KEY_STATS, JSON.stringify({
            data: stats,
            expiresAt
          }));

          applyDailyStats(stats, expiresAt);
        } catch (error) {
          console.warn('Failed to fetch daily stats', error);
          if (cached.data) {
            applyDailyStats(cached.data, cached.expiresAt, true);
          } else {
            const el = document.getElementById('daily-users');
            if (el) {
              el.innerHTML = '<span class="live-indicator"></span>—';
            }
          }
        }
      }

      function applyDailyStats(stats, expiresAt, isStale = false) {
        const today = new Date().toLocaleDateString('sv-SE');
        let users = 0;
        let labelSuffix = '';

        if (stats[today]?.update_checks != null) {
          users = stats[today].update_checks;
        } else {
          const dates = Object.keys(stats)
            .filter(d => stats[d]?.update_checks != null)
            .sort((a, b) => new Date(b) - new Date(a));
          const latest = dates[0];
          if (latest) {
            users = stats[latest].update_checks;
            const d = new Date(latest);
            labelSuffix = ` (${d.toLocaleDateString(undefined, { month: 'short', day: 'numeric' })})`;
          }
        }

        const dailyUsersEl = document.getElementById('daily-users');
        dailyUsersEl.innerHTML = '';
        const indicator = document.createElement('span');
        indicator.className = 'live-indicator';
        const count = document.createElement('span');
        count.textContent = users || '0';
        dailyUsersEl.appendChild(indicator);
        dailyUsersEl.appendChild(count);

        const labelEl = document.querySelector('.hero-stats .stat-item:nth-child(3) .stat-label');
        if (!labelEl) return;

        labelEl.innerHTML = '';
        labelEl.appendChild(document.createTextNode(`Daily Users${labelSuffix} • `));

        const tooltipDiv = document.createElement('div');
        tooltipDiv.className = 'tooltip-container';

        const trigger = document.createElement('span');
        trigger.className = 'tooltip-trigger';
        trigger.textContent = '?';
        tooltipDiv.appendChild(trigger);

        const content = document.createElement('span');
        content.className = 'tooltip-content';
        content.id = 'daily-users-tooltip';
        const updateHour = getStartOfCurrentHour(new Date(expiresAt - 3600000));
        content.textContent = `Last updated: ${formatHourLabel(updateHour)}`;
        if (isStale) content.textContent += ' (stale)';
        tooltipDiv.appendChild(content);

        labelEl.appendChild(tooltipDiv);
      }

      document.addEventListener('DOMContentLoaded', () => {
        fetchScriptInfo();
        fetchDailyStats();
      });
    </script>
  </body>
</html>